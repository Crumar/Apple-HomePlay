button_card_templates: !include_dir_merge_named button_card_templates

kiosk_mode:
  hide_header: true

views:
  - type: custom:grid-layout
    title: HomePlay
    background: var(--background)
    layout:
      margin: 0 #0.3vw
      padding: 0
      grid-gap: 0.7vw
      grid-template-columns: 0 1fr 56.5% 12.7% 0
      grid-template-rows: 3vw 53.1vw 5vw
      grid-template-areas: |
        "topbar topbar topbar topbar topbar"
        ". left center right ."
        "taskbar taskbar taskbar taskbar taskbar"

    cards:
      #.............................................................
      #.TTTTTTTTTTT....................ppbb.........................
      #.TTTTTTTTTTT....................ppbb.........................
      #.TTTTTTTTTTT....................ppbb.........................
      #....TTTT....oooooo...ooppppppp..ppbbbbbbb....aaaaaa..aarrrr..
      #....TTTT...Toooooooo.oopppppppp.ppbbbbbbbb..baaaaaaa.aarrrr..
      #....TTTT..TTooo.oooo.ooppp.pppp.ppbbb.bbbbbbbaa.aaaa.aarrr...
      #....TTTT..TToo...oooooopp...ppppppbb...bbbb....aaaaa.aarr....
      #....TTTT..TToo...oooooopp...ppppppbb...bbbb.baaaaaaa.aarr....
      #....TTTT..TToo...oooooopp...ppppppbb...bbbbbbaaaaaaa.aarr....
      #....TTTT..TToo...oooooopp...ppppppbb...bbbbbbaa.aaaa.aarr....
      #....TTTT..TTooo.oooo.ooppp.pppp.ppbbb.bbbb.bbaa.aaaa.aarr....
      #....TTTT...Toooooooo.oopppppppp.ppbbbbbbbb.bbaaaaaaa.aarr....
      #....TTTT....oooooo...ooppppppp..ppbbbbbbb...baaaaaaaaaarr....
      #.....................oopp....................................
      #.....................oopp....................................
      #.....................oopp....................................
      #.....................oopp....................................
      #.............................................................

      - type: horizontal-stack
        view_layout:
          grid-area: topbar
        cards:
          - type: picture-elements
            image: /local/1x1_trans.png
            style: |
              ha-card {
                border-radius: 20px 20px 0px 0px !important;
                --ha-card-background: var(--custom-ha-card-background);
                backdrop-filter: var(--custom-ha-card-backdrop-filter);
                --ha-card-border-color: rgba(0, 0, 0, 0);
                --ha-card-border-width: 0px;
                #margin-left: 0%;
                #margin-right: -4px;
                #margin-top: -8px;
                #margin-bottom: -4px;
              }

            elements:
              - type: custom:hui-element
                card_type: horizontal-stack
                style:
                  top: 1.5vw
                  left: 50%
                  #transform: none

                cards:
                  - type: custom:button-card
                    entity: sensor.temperature_min_max
                    name: Temperature
                    template:
                      - topbar
                      - icon_thermometer
                  
                  - type: custom:button-card
                    entity: sensor.humidity_min_max
                    name: Humidité
                    template:
                      - topbar
                      - icon_humidity

                  - type: custom:button-card
                    entity: sensor.lights_on_count
                    name: Lumières
                    template:
                      - topbar
                      - icon_light
                    styles:
                      card:
                        - background: >
                            [[[
                              if (states['sensor.lights_on_count'].state == '0 lumières allumées') return 'var(--custom-topbar-background)';
                              return "white";
                            ]]]
                      name:
                        - color: >
                            [[[
                              if (states['sensor.lights_on_count'].state == '0 lumières allumées') return 'var(--custom-ha-card-text-color-primary)';
                              return "black";
                            ]]]
                      state:
                        - color: >
                            [[[
                              if (states['sensor.lights_on_count'].state == '0 lumières allumées') return 'var(--custom-ha-card-text-color-third)';
                              return 'rgba(60,60,60,1)';
                            ]]]

                  - type: custom:button-card
                    entity: sensor.climate_text
                    name: Climat
                    icon: mdi:thermostat
                    template:
                      - topbar-climate
                    custom_fields:
                      temperature: >
                        [[[ return states['sensor.climate_temp'].state ]]]
                      
                  - type: custom:button-card
                    entity: lock.x3_xdrive30i_lock
                    name: Voiture
                    template:
                      - topbar
                      - icon_car

                  - type: custom:button-card
                    entity: sensor.battery_min_max
                    name: Batterie
                    template:
                      - topbar
                      - icon_battery_100
                    tap_action: !include popup/battery.yaml

      #..................................
      #.LLLL..................fffff.ttt..
      #.LLLL.................effffftttt..
      #.LLLL.................efff..tttt..
      #.LLLL........eeeeee..eeffffftttt..
      #.LLLL.......eeeeeeee.eeffffftttt..
      #.LLLL......Leee.eeee..efff..tttt..
      #.LLLL......Leee..eeee.efff..tttt..
      #.LLLL......Leeeeeeeee.efff..tttt..
      #.LLLL......Leeeeeeeee.efff..tttt..
      #.LLLL......Leee.......efff..tttt..
      #.LLLLLLLLLLLeee..eeee.efff..tttt..
      #.LLLLLLLLLL.eeeeeeee..efff..tttt..
      #.LLLLLLLLLL..eeeeee...efff..tttt..
      #..................................

      ########################################
      ##            Weather Card            ##
      ########################################

      - type: vertical-stack
        view_layout:
          grid-area: left
        cards:
          - type: picture-elements
            image: /local/weather/empty.png
            style: |
              ha-card {
                border-radius: 1.5vw !important;
                --ha-card-background: rgba(0, 0, 0, 0);
                --ha-card-border-color: rgba(0, 0, 0, 0);
                --ha-card-border-width: 0px;
                height: 33.5vw !important; #
                box-shadow: var(--custom-ha-card-box-shadow);
              }

            elements:
              - type: image
                entity: sensor.weather_bg_condition2
                action: none
                hold_action: none
                tap_action: none
                style:
                  top: 0px
                  left: 0px
                  transform: none
                  height: 60%
                state_image: !include button_card_templates/weather_bg.yaml

              # Feel Like Temperature
              - type: state-label
                entity: sensor.feel_like
                hold_action:
                  action: none
                style:
                  color: "rgb(255, 255, 255)"
                  font-size: 6vw
                  font-weight: 350
                  text-align: center
                  left: 50%
                  top: 7%
                  text-shadow: 0px 0px 10px rgba(0,0,0,0.4)
                tap_action:
                  action: none

              - type: state-label
                entity: sensor.montreal_current_condition
                style:
                  left: 50%
                  top: 15%
                  #width: 20vw
                  text-align: center
                  font-weight: 400
                  font-size: 1.5vw
                  text-shadow: 0px 0px 4px rgba(0,0,0,0.5)
                  color: rgba(255,255,255,1)

              - type: state-label
                entity: sensor.high_low_temp
                style:
                  left: 50%
                  top: 18%
                  text-align: center
                  font-weight: 400
                  font-size: 1.5vw
                  text-shadow: 0px 0px 4px rgba(0,0,0,0.5)
                  color: rgba(255,255,255,1)

              - type: custom:mod-card
                style:
                  #top: 36%
                  bottom: 57%
                  left: 50%
                  width: 95%
                card:
                  type: weather-forecast
                  entity: weather.montreal_hourly_forecast
                  show_current: false
                  show_forecast: true
                  style:
                  card_mod:
                    style: |
                      .forecast-image-icon > * {
                        transform: scale(0.8);
                        background-size: contain !important;
                      }
                      .forecast {
                        padding-top: 0.5vw !important;
                        color: white;
                      }
                      ha-card {
                        background: var(--custom-weather-card-background);
                        backdrop-filter: var(--custom-weather-card-backdrop-filter);
                        padding: 1px !important;
                      }

              - type: custom:clock-weather-card
                entity: weather.openweathermap
                forecast_days: 4
                hide_today_section: true
                style:
                  left: 50%
                  bottom: 38%
                  width: 95%
                  backdrop-filter: var(--custom-weather-card-backdrop-filter)
                  background-color: var(--custom-weather-card-background)
                  border-color: rgba(255, 255, 255, 1)
                  border-radius: 1vw
                  border-width: 0.8px
                card_mod:
                  style: |
                    ha-card {
                      --bar-height: 0.3vw !important;
                    }
                    clock-weather-card-forecast-row {
                      grid-template-columns: 2rem 2rem 3.1rem 1fr 3.1rem !important;
                      gap: 0.7rem !important;
                    }
                    forecast-text {
                      text-align: right !important;
                      color: white;
                    }
                    forecast-temperature-bar-background {
                      background: rgb(0,0,0) !important;
                    }
                    .card-content {
                      padding-top: 0.5vw !important;
                      padding-bottom: 0.5vw !important;
                    }

          ########################################
          ##           Calendar Card            ##
          ########################################

          - type: custom:atomic-calendar-revive
            entities:
              - entity: calendar.famille
                name: famille
                maxDaysToShow: 100
            showWeekDay: true
            showMonth: true
            maxEventCount: 3
            showLoader: false
            showLocation: false
            showProgressBar: false
            showDatePerEvent: true
            hideFinishedEvents: true
            tap_action:
              action: none
            hold_action:
              action: none
            card_mod:
              style: |
                ha-card {
                  transform: none;
                  background: var(--custom-calendar-card-background) !important; 
                  backdrop-filter: var(--custom-calendar-card-backdrop-filter); 
                  border-color: rgba(255, 255, 255, 0.03);
                  border-radius: 1.5vw;
                  box-shadow: var(--custom-ha-card-box-shadow);
                  padding:0.6vw !important;
                }
                .hoursHTML {
                  --time-color: var(--custom-ha-card-text-color-secondary) !important;
                  --time-size: 1.3vw !important;
                  font-weight: 500;
                }
                .event-title {
                  --event-title-size: 1.6vw !important;
                  color: var(--custom-ha-card-text-color-primary) !important;
                  font-weight: 600;
                  overflow: hidden;
                  text-overflow: ellipsis;
                  white-space: nowrap;
                  width: 18vw;
                  padding-bottom: 0.3vw;
                }
                .relativeTime {
                  --time-color: var(--custom-ha-card-text-color-secondary) !important;
                  --time-size: 1vw !important;
                  font-weight: 500;
                  overflow: hidden;
                  text-overflow: ellipsis;
                  white-space: nowrap;
                  width: 8.4vw;
                }
                .event-left {
                  font-size: 1.3vw !important;
                  font-weight: 500;
                  color: var(--custom-ha-card-text-color-primary) !important;
                }
                .event-right {
                  border-left-style: solid;
                  border-left-color: var(--custom-ha-card-text-color-secondary);
                  justify-content: start !important;
                  padding: 0px 1vw !important;
                }
                .daywrap {
                  border-color: rgba(255,255,255,0) !important;
                  padding: 0px !important;
                }
                tr{
                  background-color: var(--custom-calendar-card-background-revert);
                  backdrop-filter: var(--custom-calendar-card-backdrop-filter-revert); 
                  display: block;
                  border-radius: 1vw;
                  margin-bottom: 0.3vw;
                }
                .cal-card{
                  #height: 19.4vw !important;
                }

      #............................................................
      #....CCCCCCC..........................ttt....................
      #...CCCCCCCCC........................tttt....................
      #..CCCCCCCCCCC.......................tttt....................
      #..CCCC...CCCCC..eeeeee...nnnnnnnn.nnttttte.eeeeee..errrrrr..
      #.CCCC.....CCC..eeeeeeee..nnnnnnnnnnnttttteeeeeeeee.errrrrr..
      #.CCCC.........eeee.eeee..nnnn.nnnnn.tttt.eeee.eeee.errrr....
      #.CCCC.........eeee..eeee.nnnn..nnnn.tttt.eeee..eeeeerrr.....
      #.CCCC.........eeeeeeeeee.nnnn..nnnn.tttt.eeeeeeeeeeerrr.....
      #.CCCC.....CCC.eeeeeeeeee.nnnn..nnnn.tttt.eeeeeeeeeeerrr.....
      #..CCCC...CCCCCeeee.......nnnn..nnnn.tttt.eeee......errr.....
      #..CCCCCCCCCCC.eeee..eeee.nnnn..nnnn.tttt.eeee..eeeeerrr.....
      #...CCCCCCCCCC..eeeeeeee..nnnn..nnnn.ttttteeeeeeeee.errr.....
      #....CCCCCCC.....eeeeee...nnnn..nnnn.ttttte.eeeeee..errr.....
      #............................................................

      - view_layout:
          grid-area: center
        type: custom:mod-card
        style:
          swipe-card:
            $: |
              .swiper-pagination {
                display: flex;
                flex-direction: column-reverse;
                width: 8% !important;
                left: 0.3vw !important;
                bottom: inherit !important;
                top: 37%;
              }
              .swiper-pagination-bullets>span {
                margin: 0.3vw !important;
                min-width: 4.5vw;
                min-height: 4.5vw;
                display: flex;
                align-items: center;
                justify-content: space-around;
                color: black;
                background: rgba(255,255,255,0.8);
                box-shadow: var(--custom-ha-card-box-shadow);
              }
              .swiper-pagination-bullets>span:nth-child(1):before {
                content: "SS";
                font-size: 1.5vw;
                font-weight: 600;
              }
              .swiper-pagination-bullets>span:nth-child(2):before {
                content: "RDC";
                font-size: 1.5vw;
                font-weight: 600;
              }
              .swiper-pagination-bullets>span:nth-child(3):before {
                content: "N1";
                font-size: 1.5vw;
                font-weight: 600;
              }
              .swiper-container {
                box-shadow: var(--custom-ha-card-box-shadow);
                border-radius: 1.5vw;
              }

        card:
          type: custom:swipe-card
          start_card: 2
          parameters:
            effect: cards
            spaceBetween: 8
            pagination:
              type: "bullets"
              clickable: true
          cards:
            ###############################
            # BASEMENT FLOOR              #
            ###############################
            - type: picture-elements
              image: /local/house/floor-empty.png
              style: |
                ha-card {
                  border-radius: 20px !important ;
                  border-style: none !important;
                  border-width: 0px !important;
                  border-color: rgba(0,0,0,0) !important;
                }
              elements:
                - type: image
                  entity: sun.sun
                  state_image:
                    above_horizon: /local/house/basement-day.png
                    below_horizon: /local/house/basement-night.png
                  style:
                    Left: 50%
                    top: 50%
                    width: 100%
                  hold_action:
                    action: none
                  tap_action:
                    action: none
              
                - type: custom:button-card
                  entity: switch.switch_basement
                  icon: phu:ceiling-runner-three
                  style:
                    left: 45%
                    top: 32%
                  template:
                    - light

                - type: custom:button-card
                  entity: sensor.temperaturesensor_basement_temperature
                  show_state: true
                  show_icon: false
                  show_name: false
                  show_label: false
                  style:
                    left: 45%
                    top: 45%
                  styles:
                    card:
                      - width: 3vw
                      - height: 3vw
                      - borderRadius: 6vw
                      - border-width: 0px
                      - background-color: var(--custom-switch-bg-color)
                    state:
                      - font-size: 1vw
                  
            ###############################
            # GROUND FLOOR                #
            ###############################
            - type: picture-elements
              image: /local/house/rdc-night.png
              style: |
                ha-card {
                  border-radius: 20px !important ;
                  --ha-card-border-width: 0px;
                }
              elements:
                - type: image
                  entity: sun.sun
                  state_image:
                    above_horizon: /local/house/rdc-day.png
                    below_horizon: /local/house/rdc-night.png
                  style:
                    Left: 50%
                    top: 50%
                    width: 100%
                  hold_action:
                    action: none
                  tap_action:
                    action: none

                - type: custom:button-card
                  entity: light.dimmerlivingroom
                  icon: phu:bulb-group-ceiling-round
                  style:
                    left: 45%
                    top: 32%
                  template:
                    - light

                - entity: light.kitchen_leds
                  type: custom:button-card
                  icon: phu:light-strip
                  style:
                    left: 85%
                    top: 75%
                  template:
                    - light

                - entity: light.couloir_entree
                  type: custom:button-card
                  icon: phu:friends-of-hue-iq-pendant
                  style:
                    left: 70%
                    top: 35%
                  template:
                    - light

                - entity: switch.switchvestibule_switch
                  type: custom:button-card
                  icon: phu:ceiling-fugato-three
                  style:
                    left: 74%
                    top: 17%
                  template:
                    - light

                - entity: switch.switchexteriorfront
                  type: custom:button-card
                  icon: phu:wall-appear
                  style:
                    left: 72%
                    top: 5%
                  template:
                    - light

                - entity: switch.switchexterieurback_switch
                  type: custom:button-card
                  icon: phu:wall-flood
                  style:
                    left: 64%
                    top: 95%
                  template:
                    - light

                - entity: light.floodlight_kitchen
                  name: FloodLight
                  type: custom:button-card
                  icon: phu:ceiling-aurelle
                  style:
                    left: 70%
                    top: 65%
                  template:
                    - light

                - entity: light.grouplightkitchencounter
                  type: custom:button-card
                  icon: phu:bulb-group-classic-hung-4
                  style:
                    left: 55%
                    top: 65%
                  template:
                    - light

                - entity: light.stairs_lights
                  type: custom:button-card
                  icon: phu:ceiling-fugato-four-alt
                  style:
                    left: 85%
                    top: 50%
                  template:
                    - light

                - entity: light.groupspotlightkitchensink
                  type: custom:button-card
                  icon: phu:bulb-group-ceiling-flush-circular
                  style:
                    left: 73%
                    top: 85%
                  template:
                    - light

                - entity: switch.switchexteriorfrontplug
                  type: custom:button-card
                  show_entity_picture: true
                  style:
                    left: 60%
                    top: 5%
                  template:
                    - switch

                - entity: media_player.appletv_salon
                  type: custom:button-card
                  entity_picture: /local/icon/appletv.fill.png
                  show_entity_picture: true
                  style:
                    left: 18%
                    top: 40%
                  template:
                    - light

                - entity: light.dreamview_t1
                  type: custom:button-card
                  style:
                    left: 18%
                    top: 30%
                  template:
                    - light-svg
                    - icon_light_panel

            ###############################
            # 1st floor                   #
            ###############################
            - type: picture-elements
              image: /local/house/1st-floor-night.png
              style: |
                ha-card {
                  border-radius: 20px !important ;
                  --ha-card-border-width: 0px;
                }
              elements:
                - type: image
                  entity: sun.sun
                  state_image:
                    above_horizon: /local/house/1st-floor-day.png
                    below_horizon: /local/house/1st-floor-night.png
                  style:
                    Left: 50%
                    top: 50%
                    width: 100%
                  hold_action:
                    action: none
                  tap_action:
                    action: none

                - entity: light.bathroom_light
                  type: custom:button-card
                  icon: mdi:outdoor-lamp
                  style:
                    left: 90%
                    top: 80%
                  template:
                    - light

                - entity: light.stairs_lights
                  type: custom:button-card
                  icon: phu:ceiling-fugato-four-alt
                  style:
                    left: 76%
                    top: 55%
                  template:
                    - light

                - entity: switch.smartplugclara
                  type: custom:button-card
                  icon: mdi:apple-icloud
                  style:
                    left: 20%
                    top: 65%
                  template:
                    - light

      #...............................................
      #.RRRRRRRRRR...iiii............hhhh........ttt..
      #.RRRRRRRRRRR..iiii............hhhh.......tttt..
      #.RRRRRRRRRRR..................hhhh.......tttt..
      #.RRRR...RRRRR.iiii..ggggggggg.hhhhhhhh.hhtttt..
      #.RRRR...RRRRR.iiii.gggggggggg.hhhhhhhhhhhtttt..
      #.RRRRRRRRRRR..iiiiigggg.ggggg.hhhh.hhhhh.tttt..
      #.RRRRRRRRRRR..iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRRRRRR.....iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRR.RRRR....iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRR..RRRR...iiiiiggg...gggg.hhhh..hhhh.tttt..
      #.RRRR..RRRRR..iiiiigggg.ggggg.hhhh..hhhh.tttt..
      #.RRRR...RRRRR.iiii.gggggggggg.hhhh..hhhh.tttt..
      #.RRRR....RRRR.iiii..ggggggggg.hhhh..hhhh.tttt..
      #.........................gggg..................
      #..................igggg.gggg...................
      #...................ggggggggg...................
      #....................ggggggg....................
      #...............................................

      - type: vertical-stack
        view_layout:
          grid-area: right
        cards:
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "on"
            card:

              type: custom:button-card
              entity: person.sebastien_logeais
              template: person
              variables:
                picture: '/local/person/seb.jpg'  #Picture in WWW folder
                travel_time: "[[[ return states['sensor.seb_work_travel_time'].state ]]]"
            
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.washing_machine
                state_not: "Off"
            card:
              type: custom:button-card
              entity: input_select.washing_machine
              name: Laveuse
              icon: fapro:Icons=washer.fill
              template:
                - washer-dryer
        
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.washing_machine
                state: "Off"
            card:
          
              type: custom:button-card
              entity: person.sebastien_logeais
              template: person
              variables:
                picture: '/local/person/seb.jpg'  #Picture in WWW folder
                travel_time: "[[[ return states['sensor.seb_work_travel_time'].state ]]]"

          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "on"
            card:
              
              type: custom:button-card
              entity: person.lynn
              template: person
              variables:
                picture: '/local/person/lynn'  #Picture in WWW folder
                travel_time: "[[[ return states['sensor.seb_work_travel_time'].state ]]]"
            
          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.dryer_machine
                state_not: "Off"
            card:
              type: custom:button-card
              entity: input_select.dryer_machine
              name: Sécheuse
              icon: fapro:Icons=dryer.fill
              template:
                - washer-dryer

          - type: conditional
            conditions:
              - entity: binary_sensor.7_9am
                state: "off"
              - entity: input_select.dryer_machine
                state: "Off"
            card:
        
              type: custom:button-card
              entity: person.lynn
              template: person
              variables:
                picture: '/local/person/lynn'  #Picture in WWW folder
                travel_time: "[[[ return states['sensor.seb_work_travel_time'].state ]]]"
              
          - type: custom:button-card
            entity: sensor.garbage
            name: Poubelle
            icon: fapro:Icons=trash.fill
            template:
              - garbage
      
          - type: custom:button-card
            entity: sensor.recycling
            name: Recyclage
            icon: fapro:Icons=recycling.fill
            template:
              - garbage

      #      - type: custom:button-card
      #        entity: input_select.washing_machine
      #        name: Machine à lavée
      #        icon: fapro:Icons=washer.fill
      #        template:
      #          - washer-dryer

      #.....................................................................
      #.TTTTTTTTTTT..................sssk......kkkb.........................
      #.TTTTTTTTTTT..................sssk......kkkb.........................
      #.TTTTTTTTTTT..................sssk......kkkb.........................
      #....TTTT....aaaaaa...aasssss..sssk.kkkkkkkkbbbbbb....baaaaa..aaarrr..
      #....TTTT...Taaaaaaa.aaassssss.ssskkkkkk.kkkbbbbbbb..bbaaaaaa.aaarrr..
      #....TTTT..TTaa.aaaa.aaas.ssss.ssskkkkk..kkkbb.bbbbbbbba.aaaa.aaarr...
      #....TTTT......aaaaa.aaass.....ssskkkk...kkkb...bbbb....aaaaa.aaar....
      #....TTTT...Taaaaaaa.aaassss...ssskkkk...kkkb...bbbb.bbaaaaaa.aaar....
      #....TTTT..TTaaaaaaa...assssss.ssskkkkk..kkkb...bbbbbbbaaaaaa.aaar....
      #....TTTT..TTaa.aaaa......sssssssskkkkkk.kkkb...bbbbbbba.aaaa.aaar....
      #....TTTT..TTaa.aaaa.aaas..sssssssk.kkkk.kkkbb.bbbb.bbba.aaaa.aaar....
      #....TTTT..TTaaaaaaa.aaassssss.sssk..kkkkkkkbbbbbbb.bbbaaaaaa.aaar....
      #....TTTT...Taaaaaaaa..asssss..sssk..kkkkkkkbbbbbb...bbaaaaaaaaaar....
      #.....................................................................

      - type: horizontal-stack
        view_layout:
          grid-area: taskbar
        cards:
          - type: picture-elements
            image: /local/1x1_trans.png
            style: |
              ha-card {
                border-radius: 0px 0px 20px 20px !important;
                --ha-card-background: var(--custom-ha-card-background);
                backdrop-filter: var(--custom-ha-card-backdrop-filter);
                --ha-card-border-color: rgba(0, 0, 0, 0);
                --ha-card-border-width: 0px;

              }
            elements:
              - type: state-label
                entity: sensor.time
                style:
                  top: 2.5vw
                  left: 94%
                  color: var(--custom-ha-card-text-color-primary)
                  font-size: 4.3vw
                  font-weight: 300
                  letter-spacing: "-0.2vw"
                  width: 12vw
                  height: 6.15vw
                  display: flex #enable alignement
                  align-items: center #Verticaly align
                  justify-content: center #Horizontaly align
                  background: var(--custom-ha-card-background-revert)
                  border-radius: 0px 0px 20px 0px
                action: none
                hold_action: none
                tap_action: none

              # Weekday
              - type: state-label
                entity: sensor.day

                style:
                  top: 1.6vw
                  left: 87%
                  transform: translate(-100%, -50%)
                  color: var(--custom-ha-card-text-color-secondary)
                  font-size: 2vw
                  font-weight: 400
                  letter-spacing: "-0.05vw"
                  display: flex #enable alignement
                  justify-content: right
                action: none
                hold_action: none
                tap_action: none

              # day + Month
              - type: state-label
                entity: sensor.month
                style:
                  top: 3.6vw
                  left: 87%
                  transform: translate(-100%, -50%)
                  color: var(--custom-ha-card-text-color-secondary)
                  font-size: 2vw
                  font-weight: 400
                  letter-spacing: "-0.05vw"
                  display: flex #enable alignement
                  justify-content: right
                  width: 120px
                action: none
                hold_action: none
                tap_action: none

              #....................................................
              #.....AAAAA.....PPPPPPPPP...PPPPPPPPP....SSSSSSS.....
              #.....AAAAA.....PPPPPPPPPP..PPPPPPPPPP..SSSSSSSSS....
              #....AAAAAA.....PPPPPPPPPPP.PPPPPPPPPPP.SSSSSSSSSS...
              #....AAAAAAA....PPPP...PPPP.PPPP...PPPPPSSSS..SSSS...
              #...AAAAAAAA....PPPP...PPPP.PPPP...PPPPPSSSS.........
              #...AAAAAAAA....PPPPPPPPPPP.PPPPPPPPPPP.SSSSSSS......
              #...AAAA.AAAA...PPPPPPPPPP..PPPPPPPPPP...SSSSSSSSS...
              #..AAAAAAAAAA...PPPPPPPPP...PPPPPPPPP......SSSSSSS...
              #..AAAAAAAAAAA..PPPP........PPPP..............SSSSS..
              #..AAAAAAAAAAA..PPPP........PPPP.......PSSS....SSSS..
              #.AAAA....AAAA..PPPP........PPPP.......PSSSSSSSSSSS..
              #.AAAA.....AAAA.PPPP........PPPP........SSSSSSSSSS...
              #.AAAA.....AAAA.PPPP........PPPP.........SSSSSSSS....
              #....................................................

              - type: custom:button-card
                entity: alarm_control_panel.alarme
                icon: fapro:Icons=gearshape.fill
                size: 70%
                style:
                  top: 2.5vw
                  left: 3.5%
                template:
                  - setting_icon
                tap_action:
                  action: navigate
                  navigation_path: /config/dashboard

              - type: custom:button-card
                entity: alarm_control_panel.alarme
                icon: fapro:setting
                size: 85%
                style:
                  top: 2.5vw
                  left: 10%
                template:
                  - setting_icon
                tap_action: !include popup/setting.yaml

              - type: custom:hui-element
                card_type: horizontal-stack
                style:
                  top: 2.5vw
                  left: 50%
                  padding-right: 1.4vw
                  padding-left: 1.4vw
                  padding-top: 0.6vw
                  padding-bottom: 0.5vw
                  background: var(--custom-ha-card-background-revert)
                cards:
                  - type: custom:button-card
                    entity: group.hass_update_notification
                    entity_picture: /local/icon/home_assistant.png
                    template:
                      - apps
                    tap_action: !include popup/homeassistant.yaml

                  - type: custom:button-card
                    entity: group.router_update_notification
                    entity_picture: /local/icon/wifi.png
                    template:
                      - apps
                    tap_action: !include popup/wifi.yaml

                  - type: custom:button-card
                    entity: alarm_control_panel.alarme
                    entity_picture: /local/icon/alarm2.png
                    template:
                      - apps
                    #tap_action:
                    #  !include popup/alarm.yaml

                  - type: custom:button-card
                    entity: binary_sensor.server_security_status
                    entity_picture: /local/icon/server.png
                    template:
                      - apps
                    tap_action: !include popup/server.yaml

                  ### SEPARATOR ##################################################
#                  - type: custom:button-card
#                    show_state: false
#                    show_name: false
#                    show_icon: false
#                    styles:
#                      card:
#                        - width: 2px
#                        - height: 50px
#                        - borderRadius: 0px
#                        - border-width: 0px
#                        - background-color: 'rgba(255,255,255,0.4)'
#                        - margin: 12px 0px 0px 0px
