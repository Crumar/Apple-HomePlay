action: fire-dom-event
browser_mod:
  service: browser_mod.popup
  data:
    title: NAS
    timeout: 30000
    card_mod:
      style: 
        ha-dialog$: |
          div.mdc-dialog__surface {
            backdrop-filter: var(--custom-ha-card-backdrop-filter);
            box-shadow: rgb(0 0 0 / 20%) 0px 1px 17px -7px, rgb(0 0 0 / 14%) -1px 0px 38px 3px, rgb(0 0 0 / 12%) -2px 2px 46px 8px
          } 
          header.mdc-top-app-bar {
            background-color: var(--custom-ha-card-background-revert) !important;
            color: var(--custom-ha-card-text-color-primary) !important;
          }
          .mdc-dialog .mdc-dialog__surface {
            background-color: var(--custom-ha-card-background) !important;
          }
          :host {
            color: var(--custom-ha-card-text-color-primary) !important;
            --paper-item-icon-color:
          }
          ha-header-bar {
            --mdc-theme-primary: black !important;
          }
    content:
      type: custom:layout-card
      cards:
        - type: entities
          title: Synology DS920+
          show_header_toggle: false
          card_mod:
            style: |
              :host {
                --ha-card-background: rgba(0,0,0,0) !important;
                --ha-card-border-width: 0px !important;
                --ha-card-border-color: rgba(0,0,0,0);
              }
          entities:
            - entity: binary_sensor.server_security_status
              name: Security Status

            - entity: sensor.server_temperature

            - entity: sensor.server_last_boot
              name: Last reboot

            - entity: update.server_dsm_update
              icon: mdi:package-up
              name: Update

            - type: custom:bar-card
              width: 55%
              height: 2em
              decimal: 0
              unit_of_measurement: '%'
              entity_row: true
              entities:

                - entity: sensor.server_cpu_load_average_1_min
                  name: Processor
                  icon: mdi:chip
                  tap_action:
                    action: call-service
                    service: homeassistant.update_entity
                    service_data:
                      entity_id: sensor.server_cpu_load_average_1_min

                - entity: sensor.server_memory_usage_real
                  name: RAM - 8GB
                  tap_action:
                    action: call-service
                    service: homeassistant.update_entity
                    service_data:
                      entity_id: sensor.server_memory_usage_real

                - entity: sensor.server_volume_1_volume_used
                  name: Volume - 12TB
                  tap_action:
                    action: call-service
                    service: homeassistant.update_entity
                    service_data:
                      entity_id: sensor.server_volume_1_volume_used

            - type: custom:hui-element
              card_type: horizontal-stack
              cards:
                - type: custom:button-card
                  name: Restart
                  icon: mdi:restart-alert
                  confirmation:
                    text: Est-ce que vous êtes sûre de vouloir redemarrer ?
                  tap_action:
                    action: call-service
                    service: browser_mod.sequence
                    service_data:
                      sequence:
                        - service: browser_mod.notification
                          data:
                            message: Redemarrage du serveur...
                        - service: button.press
                          data:
                            entity_id: button.server_reboot
                  #template: icon_name

                - type: custom:button-card
                  name: Shutdown
                  icon: mdi:alert
                  confirmation:
                    text: Etes-vous sûre de vouloir arrêter le serveur ?
                  tap_action:
                    action: call-service
                    service: browser_mod.sequence
                    service_data:
                      sequence:
                        - service: browser_mod.notification
                          data:
                            message: Arrêt du serveur ...
                        - service: button.press
                          data:
                            entity_id: button.server_shutdown
                  #template: icon_name